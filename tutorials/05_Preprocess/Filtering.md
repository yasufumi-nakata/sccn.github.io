---
layout: default
title: a. Filtering
long_title: a. Filtering
categories: preproc
parent: 5. Preprocess data
grand_parent: Tutorials
---
# 導入事例
カットオフ周波数、パスバンド、ストップバンド、トランジションバンドの意味のグラフィカルな説明の下。
![サイトマップ](https://user-images.githubusercontent.com/10362238/118734865-23797e00-b7f4-11eb-9eec-f52ffcba0585.png)

デフォルトでは、Windowed Sync フィルターでは、フィルタ オーダーの合理的な開始値が2つあります。ハイパスとバンドパスのカットオフfreq(カットオフ<2Hz)。 20〜40%のカットオフ周波数は、ローパスとラインノイズバンドストップのための1〜5Hzです。 基本ルールは、アーティファクトを避けながら、利益の信号から分離するために、ワイド(ロールオフソフト)としてトランジションバンドを持つことです。

データのフィルタリング
=======
線形傾向を取除くために、それは頻繁に高パス フィルターに望ましいです
データ。 1Hzでデータをフィルタリングするハイパスは、高品質のICA分解([Klug&Gramann])を得るためにも推奨されます。
2020](https://onlinelibrary.wiley.com/doi/full/10.1111/ejn.14992)。 高周波数ノイズをフィルタリングするローパスも時々必要です。

サンプル EEGLAB データセットをロードする
-------------------

メニュー項目を選択 <span style="color: brown">ファイル</span> サブメニュー項目を押します
<span style="color: brown">既存のデータセットをロードする</span>お問い合わせ 配布されているチュートリアルファイル「eeglab_data.set」を選択します。
EEGLABの「sample_data」フォルダにあるツールボックス。 それから *Open*を押して下さい。

![画像:Pop_loadset.png](/assets/images/Pop_loadset.png)

リニアトレンドの除去
-------------------

epochingの前に連続的なEEGデータをろ過することを推薦しますまたは
epochedデータがこのとまたろ過することができるがアーティファクトの取り外し、
関数(フィルタリングされる各epoch)。 フィルタリング
連続データにより、アーティファクトのフィルタリング導入を最小限に
エポックの境界線。

選択する <span style="color: brown">ツール → データのフィルタ → 基本的な FIR フィルター (新しい、デフォルト)</span>*Lowerの端*の頻度として*1* (Hz)を書き入れて下さい、
*Ok*を押します。

EEGLABのレガシーフィルタは推奨されるものではなく、後方互換性の目的のためにのみ維持されていることに注意してください()[Widmann & Schröger(ウィドマン&シュロガー)](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3391960/)).

![](/assets/images/Pop_eegfiltnew_1hz.jpg)

ウィンドウがポップアップして、名前を尋ねます
新しいデータセット。 データセット名を変更し、上書きする
*Overwrite親*チェックボックスをチェックして、親データセットを
*Ok*ボタンを押します。

ハイパスとローパスのカットオフの周波数がBOTHの場合に注意してください
選択されたローパスとハイパスのパーツは、同じスロープを持っています。 頻繁に、ローパスの斜面はそれ故に必要以上に切ります。 この問題を避けるため、
最初にローパスフィルタを適用し、その後、第二にお勧めします
コール、ハイパスフィルタ(またはその逆)。
 
データをフィルタリングした後、
フィルターが選択によって加えられたことを点検して下さい 
<span style="color: brown">Plot → チャネルのスペクトラおよび地図</span> メニュー項目をプロットする
データスペクトル。 フィルタアウト周波数領域に気づくかもしれません
'ripples'、無効なが、できれば受け入れられるろ過を示すかもしれません
工芸品。 

主要なアーティファクト(視覚的な検査による)を含むデータ部分を除去することに注意してください。データの大きなスパイクなど、フィルタリングが「スプレッド」できるので、フィルタリングが好ましいことができます。 メジャーなアーティファクトを削除すると、「境界」イベントが削除されたデータを置き換えます。 フィルタリングは、境界を越えてではなく、連続したデータセグメントにのみ適用されます。

# 接続解析のためのフィルタリング

高パスフィルタは、隣接するデータサンプルの依存性を導入し、接続解析には推奨されません。 この場合、通常はデータの傾向を除去するために部分的に決定を適用することをお勧めします。 例えば、SIFT EEGLABプラグインでは、Piecewise detrendingが利用可能です。

原因分析(1つのプロセスが別の原因となる場合の評価)のために、コール メニュー項目 <span style="color: brown">ツール → データのフィルタ → 基本 FIR フィルター (レガシー)</span> チェックボックスをチェックします。 *causal filter* を使用してください。 デフォルトでは、EEGLAB のレガシー フィルターはフィルターを先に適用し、再度後方に戻ります
フィルターによって導入される段階の遅れがnullifiedであることを保障するため。 管状フィルターを使う場合、フィルターは前方のみ適用されますので、段階の遅れは導入され、償われません。 しかしながら、因果関係は維持されます。 

# 信号処理ツールボックスなしでフィルタリング

MATLABの場合
EEGLABのレガシーフィルタはMATLABルーチンを使用しています。
*filtfilt.m*。 これは、フィルタを転送し、再び後方に適用します
フィルターによって導入される段階の遅れがnullifiedであることを保障するため。 

MATLAB シグナル処理ツールボックスが存在しない場合、EEGLAB のレガシーフィルタは、
逆のFourierの変形を含む簡単なフィルタリング方法。 これを行うには、 <span style="color: brown">ツール → データのフィルタ → 基本 FIR フィルター (レガシー)</span> メニュー項目は FIR の filtering* の代りにチェックボックス *Use (sharper) FFT の線形フィルターを点検し。

# 非線形無限衝動の応答フィルターおよび他のフィルター

無限衝動応答(IIR)フィルタプラグインも配布
EEGLABへのプラグインとして。 一度に [エントリー](https://github.com/sccn/iirfilt) プラグインをインストールします。
メニュー項目からアクセス <span style="color: brown">ツール → データのフィルタ → ショート IIR フィルター </span>お問い合わせ この機能は同じを使用します
上記のFIRフィルタリングオプションとしてグラフィカルインターフェイス。
IIR フィルターは通常異なった段階の遅れをで導入しますが
異なる周波数, これは、適用することによって補償されます
MATLAB 機能 *filtfilt.m* を使用して逆にろ過します。 無限衝動応答(IIR)フィルタの順序は、再帰的動作によるフィニト衝動応答(FIR)フィルタに直接比較できませんのでご注意ください。

MATLAB自体でフィルタリングとフィルタリングオプションについてもっと学ぶことははるかに多くあります。 EEGデータには理想的なフィルタはありません。 例えば、ERPデータのハイパスフィルタの影響は議論中です。 練習では、異なるフィルタソリューションを使用して、長所と短所について同僚に話することをお勧めします。 お問い合わせ [Q/Aフィルタリングページ](/others/Firfilt_FAQ.html) 関連する参照を含む。 定義やコンセプトの紹介のためにもチェック [Widmann ら., 2015](https://home.uni-leipzig.de/biocog/eprints/widmann_a2015jneuroscimeth250_34.pdf).

# ラインノイズ除去のためのフィルタリングの代替

バンドパスのろ過のためのもう一つの共通の使用は50-Hzか60-Hzライン騒音を取除くことです-またノッチのろ過として知られている。 しかし、ラインノイズを除去するためには、 [クリーンライン](https://github.com/sccn/cleanline) EEGLABプラグイン このプラグインは、複数のテーパリングとトンプソンF統計を融合した、シンノイド(例えば、ライン)のノイズを適応させ、除去します。 PreP パイプラインの要求で実装された CleanLine のバージョンが重要な修正を持っていることに注意してください。 [プレス](https://github.com/VisLab/EEG-Clean-Tools) しかし、この主張はまだ検証されていません。 以下の比較図に示すように、このメソッドが動作する(そして必ずしも動作しません)、結果は壮観です。

![画像:cleanline.png](/assets/images/cleanline.png)
