---
layout: default
title: Coordinate systems
long_title: Coordinate systems
parent: Concepts guide
grand_parent: Tutorials
nav_order: 5
---
# EEGLAB電極座標系

EEGLABは、電極座標系を、方向+X(原点 - 緩やかな定義 - ヘッドの中央に位置し、方向+Zに向かうヘッドポイントのトップ)に向かって指しています。 別の方向の鼻ポイントが自動的に変換されるので、鼻は+Xに向かってポイントを調整します。 距離単位または法的な定義または位置の面では、EEGLABは非常に柔軟です。 それにもかかわらず、BIDSの互換性のために、スキャンされた電極のためのEEGLABの座標系は、CTF MEGの座標系と、左の前方(LPA)と右前方(RPA)の図形(以下参照)の間に位置している頭の中心と同等です。

一般的に、システムを定義するために使用される3つの条件的または解剖的ランドマークポイント(すなわち、ナション、LPA、およびRPA)が使用されます。 このフィールドトリップを見る [よくある質問](https://www.fieldtriptoolbox.org/faq/how_are_the_different_head_and_mri_coordinate_systems_defined/#details-of-the-mni-coordinate-system) オリジンと軸が異なるシステムで定義される方法の詳細。

BEMテンプレートの電極ファイル(デフォルト)を10-5チャンネルラベルに基づいて電極の位置を割り当てることをお勧めします。デジタル化した電極の位置が記録されていない場合。 EEGLABにデジタイズされた電極の位置がインポートされている場合は、座標系の向きが正しいことを確認してください。左(+Y)、右(-Y)の「RPA」、および直面するナション(+X;上)。 必要に応じて、EEGLABチャンネルエディタの*Rotate Axis*プッシュボタンを使用して、水平平面に電極を回転させることができます(メニュー項目) <span style="color: brown">編集 → チャネルの場所</span>)。 スキャンされた電極の座標とEEGLABの [get_chanlocs ディレクティブ](https://github.com/sccn/get_chanlocs/wiki) 電極のデジタル化と [MRI画像](../09_source/Custom_head_model.md) カスタムヘッドモデルとEEGソースをローカライズします。

## EEGLABテンプレートファイル

EEGLAB は、BESA 電極モンタージュを 2 D 表現と標準 MNI BEM ソースローカリゼーションに使用します。 これらの電極システムは、人間の頭の幾何学に最も適した球に基づいています。 座標系は、nasion, left, right fiducials (LPA, RPA) と定義された座標系と比較して上方に移動します。 また、前方に傾いたので、Czは縦に定義されます。 座標系をシフトする理由は、球を頭に合わせるのが最善です。 球は、陰イオン、LPA、RPA座標フレームの起源を中心に球を中央に使用した場合、頭に一致しません。

![スクリーンショット 2022-12-13 に 12 44 11 AM](https://user-images.githubusercontent.com/1872705/207268589-53f5e8f4-9138-4273-ade5-c8d8ee8729f9.png)

10-20チャンネルモンタージュの球面座標を使うと参考フレームです。 BEMテンプレートからチャンネル座標も同じ参照フレームを使用します。

### 2-D表現バイアス

2Dのスカルプマップをプロットすると、Fpzは頭の外側の限界に位置しています。 これは、FPzが明らかに実際のキャップの額の真ん中にないように偏ったように見えるかもしれません。 しかし、次のビューを検討してください(から [チャタリアンら., 1988](https://pubmed.ncbi.nlm.nih.gov/3250964/))、これは保ちます 参照フレームの縦のCz。 

![スクリーンショット 2022-12-12 6 35 29 PM](https://user-images.githubusercontent.com/1872705/207267890-43c43a92-53c8-483a-95f1-8c9483d57310.png)

### あなたの理想を築く 2-Dレイアウト

一般的に、10-20 montage でソースのローカリゼーションを実行し、スキャンされた電極の場所を持っていない場合は、BEM テンプレート EEGLAB 位置ファイルの電極を使用することをお勧めします(チャンネル編集ウィンドウで *Look up locs* を選択したときにデフォルトです。 このファイルは十分に有効です。

関連する2D電極のレイアウトに固執しているわけではありません。 目的の2D効果を達成するために、3D電極座標の任意の線形変換を適用することができます。 これらの変換は、ヘッドモデルと電極の共同登録によって補正される場合があります。 たとえば、ヘッドプロットの外側の限界に近いファイザーを配置したい場合は、40ミリメートル(*Opt. チャンネル編集ウィンドウのヘッドセンター*)で球の中心をシフトすることにより、BEMテンプレート座標を変換することができます。 結果は以下です。 下の図は、元のBEM座標系における81電極、三次元座標フレームの由来の変化、その結果2次元プロジェクトを示しています。 

![スクリーンショット 2022-12-13 に 2 00 53 PM](https://user-images.githubusercontent.com/1872705/207454927-54e15856-bead-4ff3-948d-639240449b15.png)

外側のヘッドの限界付近の電極が中心付近の電極よりも多く配置されているため、理想的なレイアウトではありません。 より良いオプションは、EEGLAB にヘッドの制限(デフォルトは0.5)を変更するように要求することです。 これらの変更を行うと、このデータセット(EEGLAB 2023.0以降バージョンのみ)のすべての2Dプロットに影響します。 ヘッドリミットを変更するには、コマンドラインで以下を入力します。

```matlab
EEG.saved = 'no';
EEG.chaninfo.topoplot = { 'headrad' 0.68 };
[ALLEEG, EEG, CURRENTSET] = eeg_store(ALLEEG, EEG); % save data in ALLEEG
```

あなたは実際に何かを追加することができます [topoplot.mの](http://sccn.ucsd.edu/eeglab/locatefile.php?file=topoplot.m))オプション(例えば、'electrodes'、'on' はすべてのプロットで電極を表示する)。 下のスクリーンキャプチャは、0.4(左)、デフォルト0.5値(中央)と0.68(右)のヘッド半径を示しています。

![スクリーンショット 2022-12-13 に 3 09 37 PM](https://user-images.githubusercontent.com/1872705/207464956-99339d9d-e163-443d-8720-5f3add67a6c1.png)

### その他のEEGLABテンプレートファイル

電極座標を調べる際、EEGLABテンプレートファイルの広範なコレクションがあります。 例えば、以下のEGI 128チャンネルファイルをインポートしてレイアウトを表示します。 テンプレート BEM 位置ファイルを使用して、このファイルを使用してソース ローカリゼーションを実行することは、EGI セットアップ (EGI チャネルは 10-20 システムで定義されていません) 不可能です。 FieldTripがインストールされている場合、利用可能な [電極ファイル](https://www.fieldtriptoolbox.org/template/electrode/) FieldTripツールボックス内も表示しています。

![スクリーンショット 2022-12-13 に 12 07 31 午前](https://user-images.githubusercontent.com/1872705/207260856-073113fb-cf7f-488a-8a5c-d118fccec67b.png)

## 独自のモンタージュの作成と最適化

自分のモンタージュを作りたいと思うこともあります。 たとえば、特定の場所にいくつかの電極を追加したい場合があり、キャップメーカーはこれらの変化に対応します。 電極をできるだけ低く追加するなど、ヘッドカバレッジを最大限に活用したい(これを参照してください) [プロジェクト](https://github.com/arnodelorme/optimize_montage)例) 頭上領域の密なカバレッジの代わりに、最大ヘッドカバレッジをお勧めします。 ボリューム伝導のため、ボトム電極は多くの深さ情報をキャプチャし、ソースのローカリゼーションに役立ちます。

## その他の2次元レイアウト

特定の電極レイアウトを2次元表現に使用するのが永続的である場合、そうすることができます。 ただし、2Dプロットのみで定義されているため、電極位置をソースローカリゼーションや3Dプロットに使用しないでください(EEGLABが自動的に3D座標を誘導する場合でも)。

EEGLABでは様々なレイアウトをインポートすることができます。 たとえば、チュートリアルデータセット *eeglab_data.set* をインポートした後、 *eeglab_montage11_layout.loc* レイアウトを読み込みます。 そのためには、メニュー項目を使用してチャンネルエディタを呼び出す <span style="color:brown">*編集 > チャンネルの場所*</span>*Look up locs* ボタンをクリックします。 レイアウトに応じて、チャンネルエディタインターフェイスでプロット半径を調整する必要があるため、ヘッド全体が見える。 EEGLABでは、FieldTripのインポートも可能です。 [レイアウト](https://www.fieldtriptoolbox.org/template/layout/) インストールされている場合 下記の図は、2D電極レイアウトの2種類をご用意しました。

![スクリーンショット 2022-12-13 に 3 16 02 PM](https://user-images.githubusercontent.com/1872705/207465671-1327aaf3-be3f-4185-81a2-6cbdef29bfe0.png)

## 財務に関する考察

左と右前方(LPA&RPA)のポイントは、耳の解剖学的ポイント(また、顔として知られている)として一般的に使用されます。 残念ながら、それらは異なる電極モンタージュではほとんど定義されていませんが、表面的な場所を定義するエラーは、ソースのローカリゼーション結果を体系的に変更することができます [(参考)](https://doi.org/10.1109/NER.2019.8717065).

デフォルトの EEGLAB 電極は、以下の図のように 'LPA' と 'RPA' をラベル付けした分析ランドマーク付きのデータセットのためのシステムを調整します。 後方互換性の目的のために、この座標システムは「LPA」と「RPA」が正式な定義に従ってマークされているかどうかに関係なく使用されます(zygomatic アーチの後方ルートのポイントを参照してください) [詳しくはこちら](https://www.fieldtriptoolbox.org/faq/how_are_the_lpa_and_rpa_points_defined/) 詳細はこちら)

正確な耳の解剖学的ランドマークは、EEGまたはMEGデータ(AnatomicalLandmarkCoordinateSystemDescriptionフィールドの *_coordsystem.json に含まれています。 [BIDS仕様](https://bids-specification.readthedocs.io/en/stable/04-modality-specific-files/03-electroencephalography.html#coordinate-system-json-_coordsystemjson))。 それは同じです [CTF座標系](https://www.fieldtriptoolbox.org/faq/how_are_the_different_head_and_mri_coordinate_systems_defined/#details-of-the-ctf-coordinate-system) MEGについて データセット内の場所を含む場合、次の考慮事項に注意して下さい:
- 単位はミリメートルにあります
- 原点は、'LPA' と 'RPA' と 'LPA' と ' と 'LPA' と ' と 'RPA' と ' と ' と ' と ' と 'LPA' と ' と ' と '
- X軸のポイントを向き、ナシオンを通過
- Y軸は「LPA」の直角をX軸へ向かう
- Z軸は、劣悪から優れ、オルトゴナルからXおよびYまでの点

以下に示すように、適切に定義された場合でも、3ポイントLPA、RPA、およびnasionは完全に直角的な参照フレームを表すことはできません。 飛行機が3点通過するだけ。 Z方向は、この平面に直角するように設定されます。 参照フレームの中心は(この平面で)陰イオン(+X方向)を通るラインの交差として定義され、LPAとRPA(私達はラインのこれらのポイントの直角投影のための区分の長さとして間隔を定義します)。 

![スクリーンショット 2022-12-13 12 29 36 AM](https://user-images.githubusercontent.com/1872705/207265225-94db3e70-3dab-48db-950d-230d9cc9b93b.png)

当然のことながら、LPA、RPA、およびnasionのfiducialsによって定義される参照フレームの中心は重要ではないです。 FiducialsはMRIスキャンでヘッドモンタージュを揃えるために正確に定義しなければなりませんが、その相対的な位置はそれほど重要ではありません。 表示目的のために、電極は標準2Dレイアウトの1つに同様に編成され、ソースローカリゼーション目的のために3Dヘッドモデルにそれらを揃えることができることが重要です。 どちらのプロセスも、LPA、RPA、および浸漬物によって定義された参照フレームを使用することに依存しません。

## ヘリックス・トラガス・ジャンクションを使って

プレオーラルポイントは、触発可能な解剖学的機能ですが、解剖学的MRヘッド画像と3D EEG電極スキャンで見つけるのは困難です。 さらに、いくつかの実験プロトコルは、耳の他の解剖ポイント(例、耳の運河、耳のロブなど)を使用して、不正確な事前のラベルを保持している間呼びます。 正確なラベルや説明が使用されていないときに、研究、共同またはデータマイニングプロジェクトのデータ収集が不足しているときに一貫性が重要である。 電極のローカリゼーションの可用性を向上させるフォトグラメトリーでは、ヘリックス・トラガス・ジャンクション(LHJ&RHJ)をイヤー・ファイザーとして使用することを強くお勧めします。これらのポイントは、3DヘッドモデルやMRヘッド・イメージで識別できます。 おすすめの座標系です。 [<i>get_chanlocs ディレクティブ</i>](https://github.com/sccn/get_chanlocs/wiki)3Dヘッドモデルを用いたフォトグラメト電極ローカリゼーション用EEGLABプラグイン。

![画像:preferences.png](/assets/images/helixTragus.PNG)

